import{I as nt,b as me,s as ee,_ as ge,u as he,J as Le,w as ye,K as st,L as lt,M as at,N as ot,O as we,P as rt,g as se,Q as it,R as ct,f as ut,S as dt,T as ft,U as vt,V as pt,W as mt,E as ve,X as gt,Y as ke,Z as ht,$ as yt,a0 as _t,a1 as bt,m as wt,a2 as Me,d as kt,a3 as It,a4 as Et}from"./el-popper-cYwa1dRB.js";import{k as Lt,u as St,a as $t,b as Ct,E as Nt,c as Ot,d as Tt,e as xt,f as zt}from"./el-checkbox-DDg8CIO_.js";import{d as Rt,u as Ye,g as Xe,I as M,a as Pt,E as Vt,b as At}from"./ImageInfo-BIPmNbR6.js";import{d as Y,i as Bt,b as E,B as Ht,c as te,o as y,w as p,r as D,f as Se,n as N,u as t,I as Oe,e as S,M as V,N as De,g as $,O as Mt,P as Dt,j as Ce,l as Ne,J as v,T as jt,E as h,Q as Ft,F as pe,G as le,H as Ie,z as $e,R as Yt,A as Xt,m as je,S as Kt,U as xe,V as ze,v as Ut,p as Wt,W as Gt,h as Ke,K as Pe,_ as Ue,X as Zt,x as qt}from"./index-WTDxWk-M.js";import{m as ue}from"./index-DyjdSUPn.js";var Jt="Expected a function";function Ee(n,c,e){var r=!0,l=!0;if(typeof n!="function")throw new TypeError(Jt);return nt(e)&&(r="leading"in e?!!e.leading:r,l="trailing"in e?!!e.trailing:l),Rt(n,c,{leading:r,maxWait:c,trailing:l})}const Qt=me({tag:{type:String,default:"div"},span:{type:Number,default:24},offset:{type:Number,default:0},pull:{type:Number,default:0},push:{type:Number,default:0},xs:{type:ee([Number,Object]),default:()=>ue({})},sm:{type:ee([Number,Object]),default:()=>ue({})},md:{type:ee([Number,Object]),default:()=>ue({})},lg:{type:ee([Number,Object]),default:()=>ue({})},xl:{type:ee([Number,Object]),default:()=>ue({})}}),We=Symbol("rowContextKey"),en=Y({name:"ElCol"}),tn=Y({...en,props:Qt,setup(n){const c=n,{gutter:e}=Bt(We,{gutter:E(()=>0)}),r=he("col"),l=E(()=>{const u={};return e.value&&(u.paddingLeft=u.paddingRight=`${e.value/2}px`),u}),g=E(()=>{const u=[];return["span","offset","pull","push"].forEach(a=>{const _=c[a];Le(_)&&(a==="span"?u.push(r.b(`${c[a]}`)):_>0&&u.push(r.b(`${a}-${c[a]}`)))}),["xs","sm","md","lg","xl"].forEach(a=>{Le(c[a])?u.push(r.b(`${a}-${c[a]}`)):Ht(c[a])&&Object.entries(c[a]).forEach(([_,k])=>{u.push(_!=="span"?r.b(`${a}-${_}-${k}`):r.b(`${a}-${k}`))})}),e.value&&u.push(r.is("guttered")),[r.b(),u]});return(u,d)=>(y(),te(Oe(u.tag),{class:N(t(g)),style:Se(t(l))},{default:p(()=>[D(u.$slots,"default")]),_:3},8,["class","style"]))}});var nn=ge(tn,[["__file","col.vue"]]);const Ge=ye(nn),Fe=n=>{let c=0,e=n;for(;e;)c+=e.offsetTop,e=e.offsetParent;return c},sn=(n,c)=>Math.abs(Fe(n)-Fe(c)),ln=me({direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},contentPosition:{type:String,values:["left","center","right"],default:"center"},borderStyle:{type:ee(String),default:"solid"}}),an=Y({name:"ElDivider"}),on=Y({...an,props:ln,setup(n){const c=n,e=he("divider"),r=E(()=>e.cssVar({"border-style":c.borderStyle}));return(l,g)=>(y(),S("div",{class:N([t(e).b(),t(e).m(l.direction)]),style:Se(t(r)),role:"separator"},[l.$slots.default&&l.direction!=="vertical"?(y(),S("div",{key:0,class:N([t(e).e("text"),t(e).is(l.contentPosition)])},[D(l.$slots,"default")],2)):V("v-if",!0)],6))}});var rn=ge(on,[["__file","divider.vue"]]);const cn=ye(rn),un=me({urlList:{type:ee(Array),default:()=>ue([])},zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},hideOnClickModal:Boolean,teleported:Boolean,closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2},scale:{type:Number,default:1},minScale:{type:Number,default:.2},maxScale:{type:Number,default:7},showProgress:Boolean,crossorigin:{type:ee(String)}}),dn={close:()=>!0,error:n=>n instanceof Event,switch:n=>Le(n),rotate:n=>Le(n)},fn=Y({name:"ElImageViewer"}),vn=Y({...fn,props:un,emits:dn,setup(n,{expose:c,emit:e}){var r;const l=n,g={CONTAIN:{name:"contain",icon:De(lt)},ORIGINAL:{name:"original",icon:De(st)}};let u,d="";const{t:m}=Ye(),a=he("image-viewer"),{nextZIndex:_}=at(),k=$(),W=$(),j=Mt(),X=E(()=>{const{scale:i,minScale:x,maxScale:O}=l;return ot(i,x,O)}),A=$(!0),F=$(!1),P=$(l.initialIndex),ae=Dt(g.CONTAIN),L=$({scale:X.value,deg:0,offsetX:0,offsetY:0,enableTransition:!1}),_e=$((r=l.zIndex)!=null?r:_()),de=E(()=>{const{urlList:i}=l;return i.length<=1}),oe=E(()=>P.value===0),fe=E(()=>P.value===l.urlList.length-1),f=E(()=>l.urlList[P.value]),s=E(()=>[a.e("btn"),a.e("prev"),a.is("disabled",!l.infinite&&oe.value)]),w=E(()=>[a.e("btn"),a.e("next"),a.is("disabled",!l.infinite&&fe.value)]),z=E(()=>{const{scale:i,deg:x,offsetX:O,offsetY:re,enableTransition:ie}=L.value;let ne=O/i,ce=re/i;const be=x*Math.PI/180,Be=Math.cos(be),He=Math.sin(be);ne=ne*Be+ce*He,ce=ce*Be-O/i*He;const Te={transform:`scale(${i}) rotate(${x}deg) translate(${ne}px, ${ce}px)`,transition:ie?"transform .3s":""};return ae.value.name===g.CONTAIN.name&&(Te.maxWidth=Te.maxHeight="100%"),Te}),B=E(()=>`${P.value+1} / ${l.urlList.length}`);function K(){U(),u?.(),document.body.style.overflow=d,e("close")}function J(){const i=Ee(O=>{switch(O.code){case ve.esc:l.closeOnPressEscape&&K();break;case ve.space:I();break;case ve.left:b();break;case ve.up:R("zoomIn");break;case ve.right:Z();break;case ve.down:R("zoomOut");break}}),x=Ee(O=>{const re=O.deltaY||O.deltaX;R(re<0?"zoomIn":"zoomOut",{zoomRate:l.zoomRate,enableTransition:!1})});j.run(()=>{we(document,"keydown",i),we(document,"wheel",x)})}function U(){j.stop()}function o(){A.value=!1}function T(i){F.value=!0,A.value=!1,e("error",i),i.target.alt=m("el.image.error")}function C(i){if(A.value||i.button!==0||!k.value)return;L.value.enableTransition=!1;const{offsetX:x,offsetY:O}=L.value,re=i.pageX,ie=i.pageY,ne=Ee(be=>{L.value={...L.value,offsetX:x+be.pageX-re,offsetY:O+be.pageY-ie}}),ce=we(document,"mousemove",ne);we(document,"mouseup",()=>{ce()}),i.preventDefault()}function G(){L.value={scale:X.value,deg:0,offsetX:0,offsetY:0,enableTransition:!1}}function I(){if(A.value||F.value)return;const i=Lt(g),x=Object.values(g),O=ae.value.name,ie=(x.findIndex(ne=>ne.name===O)+1)%i.length;ae.value=g[i[ie]],G()}function H(i){F.value=!1;const x=l.urlList.length;P.value=(i+x)%x}function b(){oe.value&&!l.infinite||H(P.value-1)}function Z(){fe.value&&!l.infinite||H(P.value+1)}function R(i,x={}){if(A.value||F.value)return;const{minScale:O,maxScale:re}=l,{zoomRate:ie,rotateDeg:ne,enableTransition:ce}={zoomRate:l.zoomRate,rotateDeg:90,enableTransition:!0,...x};switch(i){case"zoomOut":L.value.scale>O&&(L.value.scale=Number.parseFloat((L.value.scale/ie).toFixed(3)));break;case"zoomIn":L.value.scale<re&&(L.value.scale=Number.parseFloat((L.value.scale*ie).toFixed(3)));break;case"clockwise":L.value.deg+=ne,e("rotate",L.value.deg);break;case"anticlockwise":L.value.deg-=ne,e("rotate",L.value.deg);break}L.value.enableTransition=ce}function Qe(i){var x;((x=i.detail)==null?void 0:x.focusReason)==="pointer"&&i.preventDefault()}function et(){l.closeOnPressEscape&&K()}function tt(i){if(i.ctrlKey){if(i.deltaY<0)return i.preventDefault(),!1;if(i.deltaY>0)return i.preventDefault(),!1}}return Ce(()=>X.value,i=>{L.value.scale=i}),Ce(f,()=>{$e(()=>{const i=W.value;i?.complete||(A.value=!0)})}),Ce(P,i=>{G(),e("switch",i)}),Ne(()=>{J(),u=we("wheel",tt,{passive:!1}),d=document.body.style.overflow,document.body.style.overflow="hidden"}),c({setActiveItem:H}),(i,x)=>(y(),te(t(mt),{to:"body",disabled:!i.teleported},{default:p(()=>[v(jt,{name:"viewer-fade",appear:""},{default:p(()=>[h("div",{ref_key:"wrapper",ref:k,tabindex:-1,class:N(t(a).e("wrapper")),style:Se({zIndex:_e.value})},[v(t(rt),{loop:"",trapped:"","focus-trap-el":k.value,"focus-start-el":"container",onFocusoutPrevented:Qe,onReleaseRequested:et},{default:p(()=>[h("div",{class:N(t(a).e("mask")),onClick:Ft(O=>i.hideOnClickModal&&K(),["self"])},null,10,["onClick"]),V(" CLOSE "),h("span",{class:N([t(a).e("btn"),t(a).e("close")]),onClick:K},[v(t(se),null,{default:p(()=>[v(t(it))]),_:1})],2),V(" ARROW "),t(de)?V("v-if",!0):(y(),S(pe,{key:0},[h("span",{class:N(t(s)),onClick:b},[v(t(se),null,{default:p(()=>[v(t(ct))]),_:1})],2),h("span",{class:N(t(w)),onClick:Z},[v(t(se),null,{default:p(()=>[v(t(ut))]),_:1})],2)],64)),i.$slots.progress||i.showProgress?(y(),S("div",{key:1,class:N([t(a).e("btn"),t(a).e("progress")])},[D(i.$slots,"progress",{activeIndex:P.value,total:i.urlList.length},()=>[le(Ie(t(B)),1)])],2)):V("v-if",!0),V(" ACTIONS "),h("div",{class:N([t(a).e("btn"),t(a).e("actions")])},[h("div",{class:N(t(a).e("actions__inner"))},[D(i.$slots,"toolbar",{actions:R,prev:b,next:Z,reset:I,activeIndex:P.value,setActiveItem:H},()=>[v(t(se),{onClick:O=>R("zoomOut")},{default:p(()=>[v(t(dt))]),_:1},8,["onClick"]),v(t(se),{onClick:O=>R("zoomIn")},{default:p(()=>[v(t(ft))]),_:1},8,["onClick"]),h("i",{class:N(t(a).e("actions__divider"))},null,2),v(t(se),{onClick:I},{default:p(()=>[(y(),te(Oe(t(ae).icon)))]),_:1}),h("i",{class:N(t(a).e("actions__divider"))},null,2),v(t(se),{onClick:O=>R("anticlockwise")},{default:p(()=>[v(t(vt))]),_:1},8,["onClick"]),v(t(se),{onClick:O=>R("clockwise")},{default:p(()=>[v(t(pt))]),_:1},8,["onClick"])])],2)],2),V(" CANVAS "),h("div",{class:N(t(a).e("canvas"))},[F.value&&i.$slots["viewer-error"]?D(i.$slots,"viewer-error",{key:0,activeIndex:P.value,src:t(f)}):(y(),S("img",{ref_key:"imgRef",ref:W,key:t(f),src:t(f),style:Se(t(z)),class:N(t(a).e("img")),crossorigin:i.crossorigin,onLoad:o,onError:T,onMousedown:C},null,46,["src","crossorigin"]))],2),D(i.$slots,"default")]),_:3},8,["focus-trap-el"])],6)]),_:3})]),_:3},8,["disabled"]))}});var pn=ge(vn,[["__file","image-viewer.vue"]]);const mn=ye(pn),gn=me({hideOnClickModal:Boolean,src:{type:String,default:""},fit:{type:String,values:["","contain","cover","fill","none","scale-down"],default:""},loading:{type:String,values:["eager","lazy"]},lazy:Boolean,scrollContainer:{type:ee([String,Object])},previewSrcList:{type:ee(Array),default:()=>ue([])},previewTeleported:Boolean,zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2},scale:{type:Number,default:1},minScale:{type:Number,default:.2},maxScale:{type:Number,default:7},showProgress:Boolean,crossorigin:{type:ee(String)}}),hn={load:n=>n instanceof Event,error:n=>n instanceof Event,switch:n=>Le(n),close:()=>!0,show:()=>!0},yn=Y({name:"ElImage",inheritAttrs:!1}),_n=Y({...yn,props:gn,emits:hn,setup(n,{expose:c,emit:e}){const r=n,{t:l}=Ye(),g=he("image"),u=Yt(),d=E(()=>gt(Object.entries(u).filter(([o])=>/^(data-|on[A-Z])/i.test(o)||["id","style"].includes(o)))),m=St({excludeListeners:!0,excludeKeys:E(()=>Object.keys(d.value))}),a=$(),_=$(!1),k=$(!0),W=$(!1),j=$(),X=$(),A=ke&&"loading"in HTMLImageElement.prototype;let F;const P=E(()=>[g.e("inner"),L.value&&g.e("preview"),k.value&&g.is("loading")]),ae=E(()=>{const{fit:o}=r;return ke&&o?{objectFit:o}:{}}),L=E(()=>{const{previewSrcList:o}=r;return Xt(o)&&o.length>0}),_e=E(()=>{const{previewSrcList:o,initialIndex:T}=r;let C=T;return T>o.length-1&&(C=0),C}),de=E(()=>r.loading==="eager"?!1:!A&&r.loading==="lazy"||r.lazy),oe=()=>{ke&&(k.value=!0,_.value=!1,a.value=r.src)};function fe(o){k.value=!1,_.value=!1,e("load",o)}function f(o){k.value=!1,_.value=!0,e("error",o)}function s(o){o&&(oe(),B())}const w=bt(s,200,!0);async function z(){var o;if(!ke)return;await $e();const{scrollContainer:T}=r;if(ht(T))X.value=T;else if(Ut(T)&&T!=="")X.value=(o=document.querySelector(T))!=null?o:void 0;else if(j.value){const G=Xe(j.value);X.value=yt(G)?void 0:G}const{stop:C}=_t(j,([G])=>{w(G.isIntersecting)},{root:X});F=C}function B(){!ke||!w||(F?.(),X.value=void 0,F=void 0)}function K(){L.value&&(W.value=!0,e("show"))}function J(){W.value=!1,e("close")}function U(o){e("switch",o)}return Ce(()=>r.src,()=>{de.value?(k.value=!0,_.value=!1,B(),z()):oe()}),Ne(()=>{de.value?z():oe()}),c({showPreview:K}),(o,T)=>(y(),S("div",je({ref_key:"container",ref:j},t(d),{class:[t(g).b(),o.$attrs.class]}),[_.value?D(o.$slots,"error",{key:0},()=>[h("div",{class:N(t(g).e("error"))},Ie(t(l)("el.image.error")),3)]):(y(),S(pe,{key:1},[a.value!==void 0?(y(),S("img",je({key:0},t(m),{src:a.value,loading:o.loading,style:t(ae),class:t(P),crossorigin:o.crossorigin,onClick:K,onLoad:fe,onError:f}),null,16,["src","loading","crossorigin"])):V("v-if",!0),k.value?(y(),S("div",{key:1,class:N(t(g).e("wrapper"))},[D(o.$slots,"placeholder",{},()=>[h("div",{class:N(t(g).e("placeholder"))},null,2)])],2)):V("v-if",!0)],64)),t(L)?(y(),S(pe,{key:2},[W.value?(y(),te(t(mn),{key:0,"z-index":o.zIndex,"initial-index":t(_e),infinite:o.infinite,"zoom-rate":o.zoomRate,"min-scale":o.minScale,"max-scale":o.maxScale,"show-progress":o.showProgress,"url-list":o.previewSrcList,scale:o.scale,crossorigin:o.crossorigin,"hide-on-click-modal":o.hideOnClickModal,teleported:o.previewTeleported,"close-on-press-escape":o.closeOnPressEscape,onClose:J,onSwitch:U},Kt({toolbar:p(C=>[D(o.$slots,"toolbar",xe(ze(C)))]),default:p(()=>[o.$slots.viewer?(y(),S("div",{key:0},[D(o.$slots,"viewer")])):V("v-if",!0)]),_:2},[o.$slots.progress?{name:"progress",fn:p(C=>[D(o.$slots,"progress",xe(ze(C)))])}:void 0,o.$slots["viewer-error"]?{name:"viewer-error",fn:p(C=>[D(o.$slots,"viewer-error",xe(ze(C)))])}:void 0]),1032,["z-index","initial-index","infinite","zoom-rate","min-scale","max-scale","show-progress","url-list","scale","crossorigin","hide-on-click-modal","teleported","close-on-press-escape"])):V("v-if",!0)],64)):V("v-if",!0)],16))}});var bn=ge(_n,[["__file","image.vue"]]);const Ze=ye(bn),wn=me({type:{type:String,values:["primary","success","warning","info","danger","default"],default:void 0},underline:{type:[Boolean,String],values:[!0,!1,"always","never","hover"],default:void 0},disabled:Boolean,href:{type:String,default:""},target:{type:String,default:"_self"},icon:{type:wt}}),kn={click:n=>n instanceof MouseEvent},In=Y({name:"ElLink"}),En=Y({...In,props:wn,emits:kn,setup(n,{emit:c}){const e=n,r=$t("link");Ct({scope:"el-link",from:"The underline option (boolean)",replacement:"'always' | 'hover' | 'never'",version:"3.0.0",ref:"https://element-plus.org/en-US/component/link.html#underline"},E(()=>Me(e.underline)));const l=he("link"),g=E(()=>{var m,a,_;return[l.b(),l.m((_=(a=e.type)!=null?a:(m=r.value)==null?void 0:m.type)!=null?_:"default"),l.is("disabled",e.disabled),l.is("underline",u.value==="always"),l.is("hover-underline",u.value==="hover"&&!e.disabled)]}),u=E(()=>{var m,a,_;return Me(e.underline)?e.underline?"hover":"never":(_=(a=e.underline)!=null?a:(m=r.value)==null?void 0:m.underline)!=null?_:"hover"});function d(m){e.disabled||c("click",m)}return(m,a)=>(y(),S("a",{class:N(t(g)),href:m.disabled||!m.href?void 0:m.href,target:m.disabled||!m.href?void 0:m.target,onClick:d},[m.icon?(y(),te(t(se),{key:0},{default:p(()=>[(y(),te(Oe(m.icon)))]),_:1})):V("v-if",!0),m.$slots.default?(y(),S("span",{key:1,class:N(t(l).e("inner"))},[D(m.$slots,"default")],2)):V("v-if",!0),m.$slots.icon?D(m.$slots,"icon",{key:2}):V("v-if",!0)],10,["href","target"]))}});var Ln=ge(En,[["__file","link.vue"]]);const Sn=ye(Ln),$n=["start","center","end","space-around","space-between","space-evenly"],Cn=["top","middle","bottom"],Nn=me({tag:{type:String,default:"div"},gutter:{type:Number,default:0},justify:{type:String,values:$n,default:"start"},align:{type:String,values:Cn}}),On=Y({name:"ElRow"}),Tn=Y({...On,props:Nn,setup(n){const c=n,e=he("row"),r=E(()=>c.gutter);Wt(We,{gutter:r});const l=E(()=>{const u={};return c.gutter&&(u.marginRight=u.marginLeft=`-${c.gutter/2}px`),u}),g=E(()=>[e.b(),e.is(`justify-${c.justify}`,c.justify!=="start"),e.is(`align-${c.align}`,!!c.align)]);return(u,d)=>(y(),te(Oe(u.tag),{class:N(t(g)),style:Se(t(l))},{default:p(()=>[D(u.$slots,"default")]),_:3},8,["class","style"]))}});var xn=ge(Tn,[["__file","row.vue"]]);const qe=ye(xn),q="ElInfiniteScroll",zn=50,Rn=200,Pn=0,Vn={delay:{type:Number,default:Rn},distance:{type:Number,default:Pn},disabled:{type:Boolean,default:!1},immediate:{type:Boolean,default:!0}},Ae=(n,c)=>Object.entries(Vn).reduce((e,[r,l])=>{var g,u;const{type:d,default:m}=l,a=n.getAttribute(`infinite-scroll-${r}`);let _=(u=(g=c[a])!=null?g:a)!=null?u:m;return _=_==="false"?!1:_,_=d(_),e[r]=Number.isNaN(_)?m:_,e},{}),Je=n=>{const{observer:c}=n[q];c&&(c.disconnect(),delete n[q].observer)},An=(n,c)=>{const{container:e,containerEl:r,instance:l,observer:g,lastScrollTop:u}=n[q],{disabled:d,distance:m}=Ae(n,l),{clientHeight:a,scrollHeight:_,scrollTop:k}=r,W=k-u;if(n[q].lastScrollTop=k,g||d||W<0)return;let j=!1;if(e===n)j=_-(a+k)<=m;else{const{clientTop:X,scrollHeight:A}=n,F=sn(n,r);j=k+a>=F+X+A-m}j&&c.call(l)};function Re(n,c){const{containerEl:e,instance:r}=n[q],{disabled:l}=Ae(n,r);l||e.clientHeight===0||(e.scrollHeight<=e.clientHeight?c.call(r):Je(n))}const Bn={async mounted(n,c){const{instance:e,value:r}=c;Gt(r)||kt(q,"'v-infinite-scroll' binding value must be a function"),await $e();const{delay:l,immediate:g}=Ae(n,e),u=Xe(n,!0),d=u===window?document.documentElement:u,m=Ee(An.bind(null,n,r),l);if(u){if(n[q]={instance:e,container:u,containerEl:d,delay:l,cb:r,onScroll:m,lastScrollTop:d.scrollTop},g){const a=new MutationObserver(Ee(Re.bind(null,n,r),zn));n[q].observer=a,a.observe(n,{childList:!0,subtree:!0}),Re(n,r)}u.addEventListener("scroll",m)}},unmounted(n){if(!n[q])return;const{container:c,onScroll:e}=n[q];c?.removeEventListener("scroll",e),Je(n)},async updated(n){if(!n[q])await $e();else{const{containerEl:c,cb:e,observer:r}=n[q];c.clientHeight&&r&&Re(n,e)}}},Ve=Bn;Ve.install=n=>{n.directive("InfiniteScroll",Ve)};const Hn=Ve,Q=Ke([{name:"每行6张",num:6},{name:"每行7张",num:7},{name:"每行8张",num:8},{name:"每行9张",num:9},{name:"每行10张",num:10},{name:"每行11张",num:11},{name:"每行12张",num:12}]),Mn={key:0},Dn={style:{position:"relative"}},jn={key:1,style:{"text-align":"center"}},Fn=Y({__name:"ImageView",props:{ImageInfo:{}},setup(n,{expose:c}){const e=$([]);c({checkList:e});const r=l=>{const g=e.value.indexOf(l);g>-1?e.value.splice(g,1):e.value.push(l)};return(l,g)=>{const u=Ot,d=Ze,m=Ge,a=qe,_=Nt;return y(),S("div",null,[t(M).length!=0?(y(),S("div",Mn,[v(_,{modelValue:e.value,"onUpdate:modelValue":g[0]||(g[0]=k=>e.value=k)},{default:p(()=>[v(a,{gutter:12},{default:p(()=>[(y(!0),S(pe,null,Pe(t(M),(k,W)=>(y(),te(m,{span:6,key:W},{default:p(()=>[h("div",Dn,[v(u,{label:k.id,value:k.id,class:"custom-checkbox"},null,8,["label","value"]),e.value!=null?(y(),te(d,{key:0,onClick:j=>r(k.id),src:k.url,fit:"contain",style:{width:"100%",height:"100%"}},null,8,["onClick","src"])):V("",!0)])]),_:2},1024))),128))]),_:1})]),_:1},8,["modelValue"])])):(y(),S("div",jn,[...g[1]||(g[1]=[h("h3",null,"当前选项下暂无图片",-1)])]))])}}}),Yn=Ue(Fn,[["__scopeId","data-v-0af76cce"]]),Xn={style:{display:"flex"}},Kn={style:{flex:"4.75"}},Un={class:"card-header"},Wn={style:{"font-weight":"bold",color:"#409EFF"}},Gn={class:"text"},Zn={style:{"font-weight":"bold"}},qn={class:"button-group"},Jn={class:"table-container1"},Qn={style:{flex:"2"}},es={class:"table-container2"},ts={key:0},ns={key:1,class:"item"},ss={class:"draggable-item"},ls={class:"drag-handle"},as={class:"image-name"},os={class:"infinite-list2",style:{overflow:"auto"}},rs={id:"canvas",ref:"canvas",width:"1",height:"1"},is=Y({__name:"ImageStitching",setup(n){const c=$([]),e=$([]),r=$([]);Ne(()=>{c.value=Pt.map(f=>({value:`value:${f}`,label:`${f}`})),e.value=c.value});const l=Ke(M.value.concat()),g=f=>f==="全部"?l:l.filter(s=>s.type===f),u=f=>{const s=f.replace("value:",""),w=g(s);M.value.splice(0,M.value.length,...w)},d=$(null),m=()=>{d.value&&M&&(d.value.checkList=M.value.map(f=>f.id))},a=()=>{if(d.value&&M){const f=new Set(d.value.checkList),s=M.value.map(w=>w.id||w);d.value.checkList=s.filter(w=>!f.has(w))}},_=()=>{d.value&&(d.value.checkList=[])},k=$(!0),W=f=>{console.log("List changed:",f)},j=f=>M.value.find(w=>w.id===f)?.name||"未知",X=f=>{if(!d.value||!d.value.checkList||f<0||f>=d.value.checkList.length)return;const s=d.value.checkList[f].id;d.value.checkList.splice(f,1);const w=d.value.checkList.indexOf(s);w!==-1&&d.value.checkList.splice(w,1)},A=$(Q[0]?.name),F=$([]);Ne(()=>{F.value=[...Q]});const P=$(!1),ae=async()=>{P.value=!0,await $e(),L()},L=async()=>{const f=document.getElementById("canvas");if(!f)return;const s=f.getContext("2d");if(s)try{const w=window.devicePixelRatio||1,z=d?.value?.checkList||[],B=[];for(const I of z){const H=M.value.find(b=>b.id===I);H&&B.push(H)}const K=B.map(I=>I.url),J=await Promise.all(K.map(I=>de(I))),U=_e(),o=J.length;if(o===0)return;let T=0;for(let I=0;I<o;I+=U){const b=J.slice(I,I+U).reduce((Z,R)=>Z+R.naturalWidth,0);b>T&&(T=b)}let C=0;for(let I=0;I<o;I+=U){const H=J.slice(I,I+U),b=Math.max(...H.map(Z=>Z.naturalHeight));C+=b}f.style.width=T+"px",f.style.height=C+"px",f.width=T*w,f.height=C*w,s.scale(w,w),s.fillStyle="#fff",s.fillRect(0,0,T,C);let G=0;for(let I=0;I<o;I+=U){const H=J.slice(I,I+U),b=Math.max(...H.map(R=>R.naturalHeight));let Z=0;for(const R of H)s.drawImage(R,Z,G,R.naturalWidth,R.naturalHeight),Z+=R.naturalWidth;G+=b}}catch(w){console.error("图片加载失败:",w)}},_e=()=>{if(!Q[0])return 0;if(!A.value)return Q&&Q.length>0?Q[0].num:6;const f=Q.find(s=>s.name===A.value);return f?f.num:Q&&Q.length>0?Q[0].num:6},de=f=>new Promise((s,w)=>{const z=new Image;z.onload=()=>s(z),z.onerror=w,z.src=f}),oe=f=>M.value.find(w=>w.id===f)?.url||"",fe=f=>{if(!d.value?.checkList)return[];const s=d.value.checkList.indexOf(f);return s===-1?[]:[...d.value.checkList.slice(s),...d.value.checkList.slice(0,s)].map(z=>M.value.find(K=>K.id===z)?.url||"").filter(z=>z!=="")};return(f,s)=>{const w=At,z=Vt,B=Tt,K=se,J=cn,U=Sn,o=xt,T=Ze,C=Ge,G=qe,I=zt,H=Hn;return y(),S("div",Xn,[h("div",Kn,[v(o,{shadow:"hover",gradient:"true",class:"flex-card"},{header:p(()=>[h("div",Un,[v(z,{modelValue:r.value,"onUpdate:modelValue":s[0]||(s[0]=b=>r.value=b),clearable:"",placeholder:"请选择",size:"large",onChange:u},{default:p(()=>[(y(!0),S(pe,null,Pe(e.value,b=>(y(),te(w,{key:b.value,label:b.label,value:b.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),v(B,{link:"",type:"text"},{default:p(()=>[s[5]||(s[5]=le("当前选项共有",-1)),h("span",Wn," "+Ie(t(M).length)+" ",1),s[6]||(s[6]=le("张图片",-1))]),_:1})]),h("div",null,[v(J,null,{default:p(()=>[v(K,null,{default:p(()=>[v(t(It))]),_:1})]),_:1})]),h("div",Gn,[v(U,{underline:!1},{default:p(()=>[s[7]||(s[7]=le("当前共选择 ",-1)),v(U,{type:"primary",underline:!1},{default:p(()=>[h("span",Zn," "+Ie(d.value?.checkList?.length)+" ",1)]),_:1}),s[8]||(s[8]=le(" 张图片 ",-1))]),_:1}),h("div",qn,[v(B,{type:"primary",round:"",plain:"",onClick:m},{default:p(()=>[...s[9]||(s[9]=[le("全选",-1)])]),_:1}),v(B,{type:"success",round:"",plain:"",onClick:a},{default:p(()=>[...s[10]||(s[10]=[le("反选",-1)])]),_:1}),v(B,{type:"danger",round:"",plain:"",onClick:_},{default:p(()=>[...s[11]||(s[11]=[le("清空",-1)])]),_:1})])])]),default:p(()=>[h("div",Jn,[v(Yn,{ref_key:"List",ref:d,ImageInfo:t(M)},null,8,["ImageInfo"])])]),_:1})]),s[16]||(s[16]=h("div",{style:{flex:"0.1"}},null,-1)),h("div",Qn,[v(o,{shadow:"hover",class:"flex-card"},{header:p(()=>[...s[12]||(s[12]=[h("div",{class:"card-header"},[h("span",{style:{"font-weight":"bold"}},"已选择的图片")],-1),h("div",{style:{"font-size":"small",color:"#909399","text-align":"left"}},"拖拽图片可调整顺序",-1)])]),footer:p(()=>[v(G,null,{default:p(()=>[v(C,{span:14},{default:p(()=>[v(z,{modelValue:A.value,"onUpdate:modelValue":s[3]||(s[3]=b=>A.value=b),clearable:"",placeholder:"请选择拼接方式"},{default:p(()=>[(y(!0),S(pe,null,Pe(t(Q),b=>(y(),te(w,{key:b.name,label:b.name,value:b.name},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),v(C,{span:2},{default:p(()=>[...s[14]||(s[14]=[h("div",null,null,-1)])]),_:1}),v(C,{span:8},{default:p(()=>[v(B,{disabled:d.value?.checkList.length==0,onClick:ae,type:"primary",round:""},{default:p(()=>[...s[15]||(s[15]=[le("生成拼接图",-1)])]),_:1},8,["disabled"])]),_:1})]),_:1})]),default:p(()=>[h("div",es,[d.value?.checkList?.length===0?(y(),S("div",ts,[...s[13]||(s[13]=[h("h3",null,"当前未选择任何图片",-1)])])):(y(),S("div",ns,[v(t(Zt),{onChange:W,list:d.value?.checkList,"ghost-class":"ghost","chosen-class":"chosenClass",animation:"300",onStart:s[1]||(s[1]=b=>k.value=!0),onEnd:s[2]||(s[2]=b=>k.value=!1),"item-key":"id"},{item:p(({element:b,index:Z})=>[h("div",ss,[h("li",null,[h("span",ls,[v(T,{class:"thumbnail",src:oe(b),"preview-src-list":fe(b),fit:"cover","hide-on-click-modal":"","preview-teleported":""},null,8,["src","preview-src-list"])]),h("span",as,Ie(j(b)),1),v(B,{onClick:R=>X(Z),text:"",type:"danger",icon:t(Et),circle:""},null,8,["onClick","icon"])])])]),_:1},8,["list"])]))])]),_:1})]),h("div",null,[v(I,{modelValue:P.value,"onUpdate:modelValue":s[4]||(s[4]=b=>P.value=b),title:"拼接结果",width:"95%",draggable:""},{default:p(()=>[v(J),qt((y(),S("ul",os,[h("canvas",rs,null,512)])),[[H]])]),_:1},8,["modelValue"])])])}}}),ps=Ue(is,[["__scopeId","data-v-4b83f14b"]]);export{ps as default};
