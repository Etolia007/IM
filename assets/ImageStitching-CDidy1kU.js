import{J as nt,b as ge,x as de,s as ee,_ as he,u as ye,K as Le,w as _e,L as st,M as lt,N as at,O as ot,P as ke,Q as rt,g as ne,R as it,S as ct,f as ut,U as dt,V as ft,W as vt,X as pt,Y as mt,E as pe,Z as gt,$ as Ie,a0 as ht,a1 as yt,a2 as _t,a3 as bt,m as wt,a4 as Me,d as kt,a5 as It,a6 as St}from"./el-popper-BQkXxWu8.js";import{u as Et,E as Lt,a as Ct,b as $t}from"./el-checkbox-DkPFv4x6.js";import{d as Nt,u as Ue,k as xt,g as Xe,a as Ot,b as Tt,I as X,c as zt,E as Rt,e as Pt,f as Vt,h as At}from"./ImageInfo-CCJeifgU.js";import{d as Y,i as Bt,b as S,B as Dt,c as G,o as _,w as p,r as H,f as Ce,n as N,u as t,I as Oe,e as L,M as B,N as je,g as C,O as Ht,P as Mt,j as Ne,l as xe,J as v,T as jt,E as y,Q as Ft,F as me,G as le,H as Se,z as $e,R as Yt,A as Ut,m as Fe,S as Xt,U as ze,V as Re,v as Kt,p as Wt,W as Gt,h as Ke,K as Ve,_ as We,X as Zt,x as qt}from"./index-CAPAAuXX.js";var Jt="Expected a function";function Ee(n,c,e){var r=!0,l=!0;if(typeof n!="function")throw new TypeError(Jt);return nt(e)&&(r="leading"in e?!!e.leading:r,l="trailing"in e?!!e.trailing:l),Nt(n,c,{leading:r,maxWait:c,trailing:l})}const Qt=ge({tag:{type:String,default:"div"},span:{type:Number,default:24},offset:{type:Number,default:0},pull:{type:Number,default:0},push:{type:Number,default:0},xs:{type:ee([Number,Object]),default:()=>de({})},sm:{type:ee([Number,Object]),default:()=>de({})},md:{type:ee([Number,Object]),default:()=>de({})},lg:{type:ee([Number,Object]),default:()=>de({})},xl:{type:ee([Number,Object]),default:()=>de({})}}),Ge=Symbol("rowContextKey"),en=Y({name:"ElCol"}),tn=Y({...en,props:Qt,setup(n){const c=n,{gutter:e}=Bt(Ge,{gutter:S(()=>0)}),r=ye("col"),l=S(()=>{const d={};return e.value&&(d.paddingLeft=d.paddingRight=`${e.value/2}px`),d}),h=S(()=>{const d=[];return["span","offset","pull","push"].forEach(o=>{const b=c[o];Le(b)&&(o==="span"?d.push(r.b(`${c[o]}`)):b>0&&d.push(r.b(`${o}-${c[o]}`)))}),["xs","sm","md","lg","xl"].forEach(o=>{Le(c[o])?d.push(r.b(`${o}-${c[o]}`)):Dt(c[o])&&Object.entries(c[o]).forEach(([b,k])=>{d.push(b!=="span"?r.b(`${o}-${b}-${k}`):r.b(`${o}-${k}`))})}),e.value&&d.push(r.is("guttered")),[r.b(),d]});return(d,f)=>(_(),G(Oe(d.tag),{class:N(t(h)),style:Ce(t(l))},{default:p(()=>[H(d.$slots,"default")]),_:3},8,["class","style"]))}});var nn=he(tn,[["__file","col.vue"]]);const Ze=_e(nn),Ye=n=>{let c=0,e=n;for(;e;)c+=e.offsetTop,e=e.offsetParent;return c},sn=(n,c)=>Math.abs(Ye(n)-Ye(c)),ln=ge({direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},contentPosition:{type:String,values:["left","center","right"],default:"center"},borderStyle:{type:ee(String),default:"solid"}}),an=Y({name:"ElDivider"}),on=Y({...an,props:ln,setup(n){const c=n,e=ye("divider"),r=S(()=>e.cssVar({"border-style":c.borderStyle}));return(l,h)=>(_(),L("div",{class:N([t(e).b(),t(e).m(l.direction)]),style:Ce(t(r)),role:"separator"},[l.$slots.default&&l.direction!=="vertical"?(_(),L("div",{key:0,class:N([t(e).e("text"),t(e).is(l.contentPosition)])},[H(l.$slots,"default")],2)):B("v-if",!0)],6))}});var rn=he(on,[["__file","divider.vue"]]);const cn=_e(rn),un=ge({urlList:{type:ee(Array),default:()=>de([])},zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},hideOnClickModal:Boolean,teleported:Boolean,closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2},scale:{type:Number,default:1},minScale:{type:Number,default:.2},maxScale:{type:Number,default:7},showProgress:Boolean,crossorigin:{type:ee(String)}}),dn={close:()=>!0,error:n=>n instanceof Event,switch:n=>Le(n),rotate:n=>Le(n)},fn=Y({name:"ElImageViewer"}),vn=Y({...fn,props:un,emits:dn,setup(n,{expose:c,emit:e}){var r;const l=n,h={CONTAIN:{name:"contain",icon:je(lt)},ORIGINAL:{name:"original",icon:je(st)}};let d,f="";const{t:g}=Ue(),o=ye("image-viewer"),{nextZIndex:b}=at(),k=C(),K=C(),M=Ht(),U=S(()=>{const{scale:i,minScale:T,maxScale:x}=l;return ot(i,T,x)}),D=C(!0),j=C(!1),P=C(l.initialIndex),Z=Mt(h.CONTAIN),E=C({scale:U.value,deg:0,offsetX:0,offsetY:0,enableTransition:!1}),be=C((r=l.zIndex)!=null?r:b()),fe=S(()=>{const{urlList:i}=l;return i.length<=1}),ae=S(()=>P.value===0),ve=S(()=>P.value===l.urlList.length-1),oe=S(()=>l.urlList[P.value]),u=S(()=>[o.e("btn"),o.e("prev"),o.is("disabled",!l.infinite&&ae.value)]),s=S(()=>[o.e("btn"),o.e("next"),o.is("disabled",!l.infinite&&ve.value)]),m=S(()=>{const{scale:i,deg:T,offsetX:x,offsetY:ie,enableTransition:ce}=E.value;let te=x/i,ue=ie/i;const we=T*Math.PI/180,De=Math.cos(we),He=Math.sin(we);te=te*De+ue*He,ue=ue*De-x/i*He;const Te={transform:`scale(${i}) rotate(${T}deg) translate(${te}px, ${ue}px)`,transition:ce?"transform .3s":""};return Z.value.name===h.CONTAIN.name&&(Te.maxWidth=Te.maxHeight="100%"),Te}),z=S(()=>`${P.value+1} / ${l.urlList.length}`);function R(){q(),d?.(),document.body.style.overflow=f,e("close")}function se(){const i=Ee(x=>{switch(x.code){case pe.esc:l.closeOnPressEscape&&R();break;case pe.space:re();break;case pe.left:F();break;case pe.up:V("zoomIn");break;case pe.right:w();break;case pe.down:V("zoomOut");break}}),T=Ee(x=>{const ie=x.deltaY||x.deltaX;V(ie<0?"zoomIn":"zoomOut",{zoomRate:l.zoomRate,enableTransition:!1})});M.run(()=>{ke(document,"keydown",i),ke(document,"wheel",T)})}function q(){M.stop()}function a(){D.value=!1}function O(i){j.value=!0,D.value=!1,e("error",i),i.target.alt=g("el.image.error")}function $(i){if(D.value||i.button!==0||!k.value)return;E.value.enableTransition=!1;const{offsetX:T,offsetY:x}=E.value,ie=i.pageX,ce=i.pageY,te=Ee(we=>{E.value={...E.value,offsetX:T+we.pageX-ie,offsetY:x+we.pageY-ce}}),ue=ke(document,"mousemove",te);ke(document,"mouseup",()=>{ue()}),i.preventDefault()}function A(){E.value={scale:U.value,deg:0,offsetX:0,offsetY:0,enableTransition:!1}}function re(){if(D.value||j.value)return;const i=xt(h),T=Object.values(h),x=Z.value.name,ce=(T.findIndex(te=>te.name===x)+1)%i.length;Z.value=h[i[ce]],A()}function I(i){j.value=!1;const T=l.urlList.length;P.value=(i+T)%T}function F(){ae.value&&!l.infinite||I(P.value-1)}function w(){ve.value&&!l.infinite||I(P.value+1)}function V(i,T={}){if(D.value||j.value)return;const{minScale:x,maxScale:ie}=l,{zoomRate:ce,rotateDeg:te,enableTransition:ue}={zoomRate:l.zoomRate,rotateDeg:90,enableTransition:!0,...T};switch(i){case"zoomOut":E.value.scale>x&&(E.value.scale=Number.parseFloat((E.value.scale/ce).toFixed(3)));break;case"zoomIn":E.value.scale<ie&&(E.value.scale=Number.parseFloat((E.value.scale*ce).toFixed(3)));break;case"clockwise":E.value.deg+=te,e("rotate",E.value.deg);break;case"anticlockwise":E.value.deg-=te,e("rotate",E.value.deg);break}E.value.enableTransition=ue}function J(i){var T;((T=i.detail)==null?void 0:T.focusReason)==="pointer"&&i.preventDefault()}function et(){l.closeOnPressEscape&&R()}function tt(i){if(i.ctrlKey){if(i.deltaY<0)return i.preventDefault(),!1;if(i.deltaY>0)return i.preventDefault(),!1}}return Ne(()=>U.value,i=>{E.value.scale=i}),Ne(oe,()=>{$e(()=>{const i=K.value;i?.complete||(D.value=!0)})}),Ne(P,i=>{A(),e("switch",i)}),xe(()=>{se(),d=ke("wheel",tt,{passive:!1}),f=document.body.style.overflow,document.body.style.overflow="hidden"}),c({setActiveItem:I}),(i,T)=>(_(),G(t(mt),{to:"body",disabled:!i.teleported},{default:p(()=>[v(jt,{name:"viewer-fade",appear:""},{default:p(()=>[y("div",{ref_key:"wrapper",ref:k,tabindex:-1,class:N(t(o).e("wrapper")),style:Ce({zIndex:be.value})},[v(t(rt),{loop:"",trapped:"","focus-trap-el":k.value,"focus-start-el":"container",onFocusoutPrevented:J,onReleaseRequested:et},{default:p(()=>[y("div",{class:N(t(o).e("mask")),onClick:Ft(x=>i.hideOnClickModal&&R(),["self"])},null,10,["onClick"]),B(" CLOSE "),y("span",{class:N([t(o).e("btn"),t(o).e("close")]),onClick:R},[v(t(ne),null,{default:p(()=>[v(t(it))]),_:1})],2),B(" ARROW "),t(fe)?B("v-if",!0):(_(),L(me,{key:0},[y("span",{class:N(t(u)),onClick:F},[v(t(ne),null,{default:p(()=>[v(t(ct))]),_:1})],2),y("span",{class:N(t(s)),onClick:w},[v(t(ne),null,{default:p(()=>[v(t(ut))]),_:1})],2)],64)),i.$slots.progress||i.showProgress?(_(),L("div",{key:1,class:N([t(o).e("btn"),t(o).e("progress")])},[H(i.$slots,"progress",{activeIndex:P.value,total:i.urlList.length},()=>[le(Se(t(z)),1)])],2)):B("v-if",!0),B(" ACTIONS "),y("div",{class:N([t(o).e("btn"),t(o).e("actions")])},[y("div",{class:N(t(o).e("actions__inner"))},[H(i.$slots,"toolbar",{actions:V,prev:F,next:w,reset:re,activeIndex:P.value,setActiveItem:I},()=>[v(t(ne),{onClick:x=>V("zoomOut")},{default:p(()=>[v(t(dt))]),_:1},8,["onClick"]),v(t(ne),{onClick:x=>V("zoomIn")},{default:p(()=>[v(t(ft))]),_:1},8,["onClick"]),y("i",{class:N(t(o).e("actions__divider"))},null,2),v(t(ne),{onClick:re},{default:p(()=>[(_(),G(Oe(t(Z).icon)))]),_:1}),y("i",{class:N(t(o).e("actions__divider"))},null,2),v(t(ne),{onClick:x=>V("anticlockwise")},{default:p(()=>[v(t(vt))]),_:1},8,["onClick"]),v(t(ne),{onClick:x=>V("clockwise")},{default:p(()=>[v(t(pt))]),_:1},8,["onClick"])])],2)],2),B(" CANVAS "),y("div",{class:N(t(o).e("canvas"))},[j.value&&i.$slots["viewer-error"]?H(i.$slots,"viewer-error",{key:0,activeIndex:P.value,src:t(oe)}):(_(),L("img",{ref_key:"imgRef",ref:K,key:t(oe),src:t(oe),style:Ce(t(m)),class:N(t(o).e("img")),crossorigin:i.crossorigin,onLoad:a,onError:O,onMousedown:$},null,46,["src","crossorigin"]))],2),H(i.$slots,"default")]),_:3},8,["focus-trap-el"])],6)]),_:3})]),_:3},8,["disabled"]))}});var pn=he(vn,[["__file","image-viewer.vue"]]);const mn=_e(pn),gn=ge({hideOnClickModal:Boolean,src:{type:String,default:""},fit:{type:String,values:["","contain","cover","fill","none","scale-down"],default:""},loading:{type:String,values:["eager","lazy"]},lazy:Boolean,scrollContainer:{type:ee([String,Object])},previewSrcList:{type:ee(Array),default:()=>de([])},previewTeleported:Boolean,zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2},scale:{type:Number,default:1},minScale:{type:Number,default:.2},maxScale:{type:Number,default:7},showProgress:Boolean,crossorigin:{type:ee(String)}}),hn={load:n=>n instanceof Event,error:n=>n instanceof Event,switch:n=>Le(n),close:()=>!0,show:()=>!0},yn=Y({name:"ElImage",inheritAttrs:!1}),_n=Y({...yn,props:gn,emits:hn,setup(n,{expose:c,emit:e}){const r=n,{t:l}=Ue(),h=ye("image"),d=Yt(),f=S(()=>gt(Object.entries(d).filter(([a])=>/^(data-|on[A-Z])/i.test(a)||["id","style"].includes(a)))),g=Et({excludeListeners:!0,excludeKeys:S(()=>Object.keys(f.value))}),o=C(),b=C(!1),k=C(!0),K=C(!1),M=C(),U=C(),D=Ie&&"loading"in HTMLImageElement.prototype;let j;const P=S(()=>[h.e("inner"),E.value&&h.e("preview"),k.value&&h.is("loading")]),Z=S(()=>{const{fit:a}=r;return Ie&&a?{objectFit:a}:{}}),E=S(()=>{const{previewSrcList:a}=r;return Ut(a)&&a.length>0}),be=S(()=>{const{previewSrcList:a,initialIndex:O}=r;let $=O;return O>a.length-1&&($=0),$}),fe=S(()=>r.loading==="eager"?!1:!D&&r.loading==="lazy"||r.lazy),ae=()=>{Ie&&(k.value=!0,b.value=!1,o.value=r.src)};function ve(a){k.value=!1,b.value=!1,e("load",a)}function oe(a){k.value=!1,b.value=!0,e("error",a)}function u(a){a&&(ae(),z())}const s=bt(u,200,!0);async function m(){var a;if(!Ie)return;await $e();const{scrollContainer:O}=r;if(ht(O))U.value=O;else if(Kt(O)&&O!=="")U.value=(a=document.querySelector(O))!=null?a:void 0;else if(M.value){const A=Xe(M.value);U.value=yt(A)?void 0:A}const{stop:$}=_t(M,([A])=>{s(A.isIntersecting)},{root:U});j=$}function z(){!Ie||!s||(j?.(),U.value=void 0,j=void 0)}function R(){E.value&&(K.value=!0,e("show"))}function se(){K.value=!1,e("close")}function q(a){e("switch",a)}return Ne(()=>r.src,()=>{fe.value?(k.value=!0,b.value=!1,z(),m()):ae()}),xe(()=>{fe.value?m():ae()}),c({showPreview:R}),(a,O)=>(_(),L("div",Fe({ref_key:"container",ref:M},t(f),{class:[t(h).b(),a.$attrs.class]}),[b.value?H(a.$slots,"error",{key:0},()=>[y("div",{class:N(t(h).e("error"))},Se(t(l)("el.image.error")),3)]):(_(),L(me,{key:1},[o.value!==void 0?(_(),L("img",Fe({key:0},t(g),{src:o.value,loading:a.loading,style:t(Z),class:t(P),crossorigin:a.crossorigin,onClick:R,onLoad:ve,onError:oe}),null,16,["src","loading","crossorigin"])):B("v-if",!0),k.value?(_(),L("div",{key:1,class:N(t(h).e("wrapper"))},[H(a.$slots,"placeholder",{},()=>[y("div",{class:N(t(h).e("placeholder"))},null,2)])],2)):B("v-if",!0)],64)),t(E)?(_(),L(me,{key:2},[K.value?(_(),G(t(mn),{key:0,"z-index":a.zIndex,"initial-index":t(be),infinite:a.infinite,"zoom-rate":a.zoomRate,"min-scale":a.minScale,"max-scale":a.maxScale,"show-progress":a.showProgress,"url-list":a.previewSrcList,scale:a.scale,crossorigin:a.crossorigin,"hide-on-click-modal":a.hideOnClickModal,teleported:a.previewTeleported,"close-on-press-escape":a.closeOnPressEscape,onClose:se,onSwitch:q},Xt({toolbar:p($=>[H(a.$slots,"toolbar",ze(Re($)))]),default:p(()=>[a.$slots.viewer?(_(),L("div",{key:0},[H(a.$slots,"viewer")])):B("v-if",!0)]),_:2},[a.$slots.progress?{name:"progress",fn:p($=>[H(a.$slots,"progress",ze(Re($)))])}:void 0,a.$slots["viewer-error"]?{name:"viewer-error",fn:p($=>[H(a.$slots,"viewer-error",ze(Re($)))])}:void 0]),1032,["z-index","initial-index","infinite","zoom-rate","min-scale","max-scale","show-progress","url-list","scale","crossorigin","hide-on-click-modal","teleported","close-on-press-escape"])):B("v-if",!0)],64)):B("v-if",!0)],16))}});var bn=he(_n,[["__file","image.vue"]]);const qe=_e(bn),wn=ge({type:{type:String,values:["primary","success","warning","info","danger","default"],default:void 0},underline:{type:[Boolean,String],values:[!0,!1,"always","never","hover"],default:void 0},disabled:Boolean,href:{type:String,default:""},target:{type:String,default:"_self"},icon:{type:wt}}),kn={click:n=>n instanceof MouseEvent},In=Y({name:"ElLink"}),Sn=Y({...In,props:wn,emits:kn,setup(n,{emit:c}){const e=n,r=Ot("link");Tt({scope:"el-link",from:"The underline option (boolean)",replacement:"'always' | 'hover' | 'never'",version:"3.0.0",ref:"https://element-plus.org/en-US/component/link.html#underline"},S(()=>Me(e.underline)));const l=ye("link"),h=S(()=>{var g,o,b;return[l.b(),l.m((b=(o=e.type)!=null?o:(g=r.value)==null?void 0:g.type)!=null?b:"default"),l.is("disabled",e.disabled),l.is("underline",d.value==="always"),l.is("hover-underline",d.value==="hover"&&!e.disabled)]}),d=S(()=>{var g,o,b;return Me(e.underline)?e.underline?"hover":"never":(b=(o=e.underline)!=null?o:(g=r.value)==null?void 0:g.underline)!=null?b:"hover"});function f(g){e.disabled||c("click",g)}return(g,o)=>(_(),L("a",{class:N(t(h)),href:g.disabled||!g.href?void 0:g.href,target:g.disabled||!g.href?void 0:g.target,onClick:f},[g.icon?(_(),G(t(ne),{key:0},{default:p(()=>[(_(),G(Oe(g.icon)))]),_:1})):B("v-if",!0),g.$slots.default?(_(),L("span",{key:1,class:N(t(l).e("inner"))},[H(g.$slots,"default")],2)):B("v-if",!0),g.$slots.icon?H(g.$slots,"icon",{key:2}):B("v-if",!0)],10,["href","target"]))}});var En=he(Sn,[["__file","link.vue"]]);const Ln=_e(En),Cn=["start","center","end","space-around","space-between","space-evenly"],$n=["top","middle","bottom"],Nn=ge({tag:{type:String,default:"div"},gutter:{type:Number,default:0},justify:{type:String,values:Cn,default:"start"},align:{type:String,values:$n}}),xn=Y({name:"ElRow"}),On=Y({...xn,props:Nn,setup(n){const c=n,e=ye("row"),r=S(()=>c.gutter);Wt(Ge,{gutter:r});const l=S(()=>{const d={};return c.gutter&&(d.marginRight=d.marginLeft=`-${c.gutter/2}px`),d}),h=S(()=>[e.b(),e.is(`justify-${c.justify}`,c.justify!=="start"),e.is(`align-${c.align}`,!!c.align)]);return(d,f)=>(_(),G(Oe(d.tag),{class:N(t(h)),style:Ce(t(l))},{default:p(()=>[H(d.$slots,"default")]),_:3},8,["class","style"]))}});var Tn=he(On,[["__file","row.vue"]]);const Je=_e(Tn),W="ElInfiniteScroll",zn=50,Rn=200,Pn=0,Vn={delay:{type:Number,default:Rn},distance:{type:Number,default:Pn},disabled:{type:Boolean,default:!1},immediate:{type:Boolean,default:!0}},Be=(n,c)=>Object.entries(Vn).reduce((e,[r,l])=>{var h,d;const{type:f,default:g}=l,o=n.getAttribute(`infinite-scroll-${r}`);let b=(d=(h=c[o])!=null?h:o)!=null?d:g;return b=b==="false"?!1:b,b=f(b),e[r]=Number.isNaN(b)?g:b,e},{}),Qe=n=>{const{observer:c}=n[W];c&&(c.disconnect(),delete n[W].observer)},An=(n,c)=>{const{container:e,containerEl:r,instance:l,observer:h,lastScrollTop:d}=n[W],{disabled:f,distance:g}=Be(n,l),{clientHeight:o,scrollHeight:b,scrollTop:k}=r,K=k-d;if(n[W].lastScrollTop=k,h||f||K<0)return;let M=!1;if(e===n)M=b-(o+k)<=g;else{const{clientTop:U,scrollHeight:D}=n,j=sn(n,r);M=k+o>=j+U+D-g}M&&c.call(l)};function Pe(n,c){const{containerEl:e,instance:r}=n[W],{disabled:l}=Be(n,r);l||e.clientHeight===0||(e.scrollHeight<=e.clientHeight?c.call(r):Qe(n))}const Bn={async mounted(n,c){const{instance:e,value:r}=c;Gt(r)||kt(W,"'v-infinite-scroll' binding value must be a function"),await $e();const{delay:l,immediate:h}=Be(n,e),d=Xe(n,!0),f=d===window?document.documentElement:d,g=Ee(An.bind(null,n,r),l);if(d){if(n[W]={instance:e,container:d,containerEl:f,delay:l,cb:r,onScroll:g,lastScrollTop:f.scrollTop},h){const o=new MutationObserver(Ee(Pe.bind(null,n,r),zn));n[W].observer=o,o.observe(n,{childList:!0,subtree:!0}),Pe(n,r)}d.addEventListener("scroll",g)}},unmounted(n){if(!n[W])return;const{container:c,onScroll:e}=n[W];c?.removeEventListener("scroll",e),Qe(n)},async updated(n){if(!n[W])await $e();else{const{containerEl:c,cb:e,observer:r}=n[W];c.clientHeight&&r&&Pe(n,e)}}},Ae=Bn;Ae.install=n=>{n.directive("InfiniteScroll",Ae)};const Dn=Ae,Q=Ke([{name:"每行6张",num:6},{name:"每行7张",num:7},{name:"每行8张",num:8},{name:"每行9张",num:9},{name:"每行10张",num:10},{name:"每行11张",num:11},{name:"每行12张",num:12}]),Hn={key:0},Mn={style:{position:"relative"}},jn={key:1,style:{"text-align":"center"}},Fn=Y({__name:"ImageView",props:{ImageInfo:{}},setup(n,{expose:c}){const e=C([]);c({checkList:e});const r=l=>{const h=e.value.indexOf(l);h>-1?e.value.splice(h,1):e.value.push(l)};return(l,h)=>{const d=Ct,f=qe,g=Ze,o=Je,b=Lt;return _(),L("div",null,[t(X).length!=0?(_(),L("div",Hn,[v(b,{modelValue:e.value,"onUpdate:modelValue":h[0]||(h[0]=k=>e.value=k)},{default:p(()=>[v(o,{gutter:12},{default:p(()=>[(_(!0),L(me,null,Ve(t(X),(k,K)=>(_(),G(g,{span:6,key:K},{default:p(()=>[y("div",Mn,[v(d,{label:k.id,class:"custom-checkbox"},null,8,["label"]),e.value!=null?(_(),G(f,{key:0,onClick:M=>r(k.id),src:k.url,fit:"contain",style:{width:"100%",height:"100%"}},null,8,["onClick","src"])):B("",!0)])]),_:2},1024))),128))]),_:1})]),_:1},8,["modelValue"])])):(_(),L("div",jn,[...h[1]||(h[1]=[y("h3",null,"当前选项下暂无图片",-1)])]))])}}}),Yn=We(Fn,[["__scopeId","data-v-63c72680"]]),Un={style:{display:"flex"}},Xn={style:{flex:"4.75"}},Kn={class:"card-header"},Wn={style:{"font-weight":"bold",color:"#409EFF"}},Gn={class:"text"},Zn={style:{"font-weight":"bold"}},qn={class:"button-group"},Jn={class:"table-container1"},Qn={style:{flex:"2"}},es={class:"table-container2"},ts={key:0},ns={key:1,class:"item"},ss={class:"draggable-item"},ls={class:"drag-handle"},as={class:"image-name"},os={class:"infinite-list2",style:{overflow:"auto"}},rs={id:"canvas",ref:"canvas",width:"1",height:"1",style:{display:"none"}},is={key:1,style:{"text-align":"center",padding:"20px"}},cs=Y({__name:"ImageStitching",setup(n){const c=C([]),e=C([]),r=C("");xe(()=>{c.value=zt.map(u=>({value:`value:${u}`,label:`${u}`})),e.value=c.value,e.value.length>0&&e.value[0]&&(r.value=e.value[0].value,d(r.value))});const l=Ke(X.value.concat()),h=u=>u==="全部"?l:l.filter(s=>s.type===u),d=u=>{const s=u.replace("value:",""),m=h(s);X.value.splice(0,X.value.length,...m)},f=C(null),g=()=>{if(f.value&&X.value){const u=new Set(f.value.checkList||[]);X.value.map(m=>m.id).forEach(m=>{u.add(m)}),f.value.checkList=Array.from(u)}},o=()=>{if(f.value&&X.value){const u=new Set(f.value.checkList||[]);new Set(X.value.map(m=>m.id)).forEach(m=>{u.has(m)?u.delete(m):u.add(m)}),f.value.checkList=Array.from(u)}},b=()=>{if(f.value&&X.value){const u=new Set(f.value.checkList||[]);new Set(X.value.map(m=>m.id)).forEach(m=>{u.delete(m)}),f.value.checkList=Array.from(u)}},k=C(!0),K=u=>{console.log("List changed:",u)},M=u=>l.find(m=>m.id===u)?.name||"未知",U=u=>{if(!f.value||!f.value.checkList||u<0||u>=f.value.checkList.length)return;const s=f.value.checkList[u].id;f.value.checkList.splice(u,1);const m=f.value.checkList.indexOf(s);m!==-1&&f.value.checkList.splice(m,1)},D=C(Q[0]?.name),j=C([]);xe(()=>{j.value=[...Q]});const P=C(!1),Z=C(""),E=async()=>{P.value=!0,await $e(),be()},be=async()=>{const u=document.getElementById("canvas");if(!u)return;const s=u.getContext("2d");if(s)try{const m=window.devicePixelRatio||1,z=f?.value?.checkList||[],R=[];for(const I of z){const F=l.find(w=>w.id===I);F&&R.push(F)}const se=R.map(I=>I.url),q=await Promise.all(se.map(I=>ae(I))),a=fe(),O=q.length;if(O===0)return;let $=0;for(let I=0;I<O;I+=a){const w=q.slice(I,I+a).reduce((V,J)=>V+J.naturalWidth,0);w>$&&($=w)}let A=0;for(let I=0;I<O;I+=a){const F=q.slice(I,I+a),w=Math.max(...F.map(V=>V.naturalHeight));A+=w}u.style.width=$+"px",u.style.height=A+"px",u.width=$*m,u.height=A*m,s.scale(m,m),s.fillStyle="#fff",s.fillRect(0,0,$,A);let re=0;for(let I=0;I<O;I+=a){const F=q.slice(I,I+a),w=Math.max(...F.map(J=>J.naturalHeight));let V=0;for(const J of F)s.drawImage(J,V,re,J.naturalWidth,J.naturalHeight),V+=J.naturalWidth;re+=w}Z.value=u.toDataURL("image/png")}catch(m){console.error("图片加载失败:",m)}},fe=()=>{if(!Q[0])return 0;if(!D.value)return Q&&Q.length>0?Q[0].num:6;const u=Q.find(s=>s.name===D.value);return u?u.num:Q&&Q.length>0?Q[0].num:6},ae=u=>new Promise((s,m)=>{const z=new Image;z.onload=()=>s(z),z.onerror=m,z.src=u}),ve=u=>l.find(m=>m.id===u)?.url||"",oe=u=>{if(!f.value?.checkList)return[];const s=f.value.checkList.indexOf(u);return s===-1?[]:[...f.value.checkList.slice(s),...f.value.checkList.slice(0,s)].map(z=>l.find(se=>se.id===z)?.url||"").filter(z=>z!=="")};return(u,s)=>{const m=Pt,z=Rt,R=Vt,se=ne,q=cn,a=Ln,O=At,$=qe,A=Ze,re=Je,I=$t,F=Dn;return _(),L("div",Un,[y("div",Xn,[v(O,{shadow:"hover",gradient:"true",class:"flex-card"},{header:p(()=>[y("div",Kn,[v(z,{modelValue:r.value,"onUpdate:modelValue":s[0]||(s[0]=w=>r.value=w),placeholder:"请选择",size:"large",onChange:d},{default:p(()=>[(_(!0),L(me,null,Ve(e.value,w=>(_(),G(m,{key:w.value,label:w.label,value:w.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),v(R,{link:"",type:"text"},{default:p(()=>[s[5]||(s[5]=le("当前选项共有",-1)),y("span",Wn," "+Se(t(X).length)+" ",1),s[6]||(s[6]=le("张图片",-1))]),_:1})]),y("div",null,[v(q,null,{default:p(()=>[v(se,null,{default:p(()=>[v(t(It))]),_:1})]),_:1})]),y("div",Gn,[v(a,{underline:!1},{default:p(()=>[s[7]||(s[7]=le("当前共选择 ",-1)),v(a,{type:"primary",underline:!1},{default:p(()=>[y("span",Zn," "+Se(f.value?.checkList?.length)+" ",1)]),_:1}),s[8]||(s[8]=le(" 张图片 ",-1))]),_:1}),y("div",qn,[v(R,{type:"primary",round:"",plain:"",onClick:g},{default:p(()=>[...s[9]||(s[9]=[le("全选",-1)])]),_:1}),v(R,{type:"success",round:"",plain:"",onClick:o},{default:p(()=>[...s[10]||(s[10]=[le("反选",-1)])]),_:1}),v(R,{type:"danger",round:"",plain:"",onClick:b},{default:p(()=>[...s[11]||(s[11]=[le("清空",-1)])]),_:1})])])]),default:p(()=>[y("div",Jn,[v(Yn,{ref_key:"List",ref:f,ImageInfo:t(X)},null,8,["ImageInfo"])])]),_:1})]),s[17]||(s[17]=y("div",{style:{flex:"0.1"}},null,-1)),y("div",Qn,[v(O,{shadow:"hover",class:"flex-card"},{header:p(()=>[...s[12]||(s[12]=[y("div",{class:"card-header"},[y("span",{style:{"font-weight":"bold"}},"已选择的图片")],-1),y("div",{style:{"font-size":"small",color:"#909399","text-align":"left"}},"拖拽图片可调整顺序",-1)])]),footer:p(()=>[v(re,null,{default:p(()=>[v(A,{span:14},{default:p(()=>[v(z,{modelValue:D.value,"onUpdate:modelValue":s[3]||(s[3]=w=>D.value=w),clearable:"",placeholder:"请选择拼接方式"},{default:p(()=>[(_(!0),L(me,null,Ve(t(Q),w=>(_(),G(m,{key:w.name,label:w.name,value:w.name},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),v(A,{span:2},{default:p(()=>[...s[14]||(s[14]=[y("div",null,null,-1)])]),_:1}),v(A,{span:8},{default:p(()=>[v(R,{disabled:f.value?.checkList.length==0,onClick:E,type:"primary",round:""},{default:p(()=>[...s[15]||(s[15]=[le("生成拼接图",-1)])]),_:1},8,["disabled"])]),_:1})]),_:1})]),default:p(()=>[y("div",es,[f.value?.checkList?.length===0?(_(),L("div",ts,[...s[13]||(s[13]=[y("h3",null,"当前未选择任何图片",-1)])])):(_(),L("div",ns,[v(t(Zt),{onChange:K,list:f.value?.checkList,"ghost-class":"ghost","chosen-class":"chosenClass",animation:"300",onStart:s[1]||(s[1]=w=>k.value=!0),onEnd:s[2]||(s[2]=w=>k.value=!1),"item-key":"id"},{item:p(({element:w,index:V})=>[y("div",ss,[y("li",null,[y("span",ls,[v($,{class:"thumbnail",src:ve(w),"preview-src-list":oe(w),fit:"cover","hide-on-click-modal":"","preview-teleported":""},null,8,["src","preview-src-list"])]),y("span",as,Se(M(w)),1),v(R,{onClick:J=>U(V),text:"",type:"danger",icon:t(St),circle:""},null,8,["onClick","icon"])])])]),_:1},8,["list"])]))])]),_:1})]),y("div",null,[v(I,{modelValue:P.value,"onUpdate:modelValue":s[4]||(s[4]=w=>P.value=w),title:"拼接结果",width:"75%",draggable:""},{default:p(()=>[v(q),qt((_(),L("ul",os,[y("canvas",rs,null,512),Z.value?(_(),G($,{key:0,src:Z.value,fit:"contain",style:{"max-width":"100%"},"preview-src-list":[Z.value],"hide-on-click-modal":"","preview-teleported":""},null,8,["src","preview-src-list"])):(_(),L("div",is,[...s[16]||(s[16]=[y("p",null,"请先生成拼接图",-1)])]))])),[[F]])]),_:1},8,["modelValue"])])])}}}),ps=We(cs,[["__scopeId","data-v-3587b62b"]]);export{ps as default};
